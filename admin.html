<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Cadential Studios</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="js/maintenance.js"></script>
</head>
<body class="admin-page">
    <header>
        <div class="logo-container">
            <a href="index.html" class="logo-link">
                <img src="images/light theme/full_banner_transparent.png" alt="Cadential Studios Logo" class="header-logo-img" id="header-logo">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="projects.html" class="nav-link">Projects</a></li>
                <li><a href="about.html" class="nav-link">About</a></li>
                <li><a href="music.html" class="nav-link">Music</a></li>
                <li><a href="podcast.html" class="nav-link">Podcast</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
        </nav>
        <button id="theme-toggle" aria-label="Toggle light/dark mode">
            <svg class="theme-icon" id="theme-icon-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px">
                <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zm0-5c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1V5c0-.55-.45-1-1-1zm0 14c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zm-8-7c0 .55-.45 1-1 1H3c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1zm14 0c0 .55-.45 1-1 1h-2c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1zM6.34 6.34c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41l1.41 1.41c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L6.34 6.34zm11.32 11.32c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41l1.41 1.41c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41l-1.41-1.41zM6.34 17.66l-1.41-1.41c-.39-.39-.39-1.02 0-1.41s1.02-.39 1.41 0l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0zm11.32-11.32l-1.41-1.41c-.39-.39-.39-1.02 0-1.41s1.02-.39 1.41 0l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0z"/>
            </svg>
            <svg class="theme-icon" id="theme-icon-dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px" style="display:none;">
                <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c3.31 0 6-2.69 6-6 0-4.97-4.03-9-9-9zm-1 13.5c-2.48 0-4.5-2.02-4.5-4.5S8.52 7.5 11 7.5s4.5 2.02 4.5 4.5-2.02 4.5-4.5 4.5z"/>
            </svg>
        </button>
    </header>    <main id="main-content">
        <section class="contact-form-section">
            <h1>Admin Dashboard</h1>
            <p>Welcome, admin! Manage your site and view messages below.</p>
            
            <!-- Two-Column Admin Layout -->
            <div class="admin-dashboard-grid">
                <!-- Left Column -->
                <div class="admin-column admin-column-left">
                    <!-- Site Controls -->
                    <div class="glass-card admin-card">
                        <h2>Site Controls</h2>
                        <div class="admin-controls-grid">
                            <button id="toggle-maintenance" class="button">Check Maintenance Status</button>
                            <button id="export-messages" class="button">Export Messages</button>
                        </div>
                    </div>
                    
                    <!-- Analytics Section -->
                    <div class="glass-card admin-card">
                        <h2>Analytics</h2>
                        <p>Visitor analytics and site statistics coming soon.</p>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <h4>Total Messages</h4>
                                <span class="stat-number" id="total-messages">0</span>
                            </div>
                            <div class="stat-item">
                                <h4>Unread</h4>
                                <span class="stat-number" id="unread-messages">0</span>
                            </div>
                            <div class="stat-item">
                                <h4>Starred</h4>
                                <span class="stat-number" id="starred-messages">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- User Management -->
                    <div class="glass-card admin-card">
                        <h2>User Management</h2>
                        <p>User administration features coming soon.</p>
                        <div class="admin-controls-grid">
                            <button class="button" disabled>View Users</button>
                            <button class="button" disabled>Manage Permissions</button>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="admin-column admin-column-right">
                    <!-- Mailbox Section -->
                    <div class="glass-card admin-card admin-mailbox-card">
                        <div id="admin-mailbox">
                            <!-- Mailbox content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>    <footer>
        <div class="logo-container-footer">
            <img src="images/light theme/initials_only_transparent.png" alt="Cadential Studios Footer Logo" class="footer-logo-img" id="footer-logo">
        </div>
        <nav class="footer-nav">
            <ul>
                <li><a href="index.html" class="footer-link">Home</a></li>
                <li><a href="projects.html" class="footer-link">Projects</a></li>
                <li><a href="about.html" class="footer-link">About</a></li>
                <li><a href="music.html" class="footer-link">Music</a></li>
                <li><a href="podcast.html" class="footer-link">Podcast</a></li>
                <li><a href="contact.html" class="footer-link">Contact</a></li>
                <li><a href="privacy.html" class="footer-link">Privacy Policy</a></li> 
            </ul>
        </nav>
        <p>&copy; 2025 Cadential Studios | Quality from start to finish</p>
        <div class="social-icons-footer">
            <a href="https://twitter.com/CadentialStudios" aria-label="Link to Twitter" title="Twitter"><img src="icons/twitter-small-monochrome.svg" alt="Twitter"></a>
            <a href="https://instagram.com/CadentialStudios" aria-label="Link to Instagram" title="Instagram"><img src="icons/instagram-small-monochrome.svg" alt="Instagram"></a>
            <a href="https://youtube.com/@CadentialStudios" aria-label="Link to YouTube" title="YouTube"><img src="icons/youtube-small-monochrome.svg" alt="YouTube"></a>
            <a href="https://facebook.com/CadentialStudios" aria-label="Link to Facebook" title="Facebook"><img src="icons/facebook-small-monochrome.svg" alt="Facebook"></a>
            <a href="https://x.com/CadentialStudios" aria-label="Link to X" title="X"><img src="icons/x-small-monochrome.svg" alt="X"></a>
        </div>
    </footer>

    <div id="page-loader">
        <div class="loader-initials">cs</div>
    </div>    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/mailbox.js"></script>
    <script>
        // Admin-specific functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Check admin access
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (!currentUser || !currentUser.isAdmin) {
                // Redirect non-admin users
                alert('Admin access required. Redirecting to login page.');
                window.location.href = 'login.html';
                return;
            }

            // Setup admin controls
            setupAdminControls();
        });        function setupAdminControls() {
            // Update statistics
            updateAdminStats();
            
            // Maintenance mode status
            const maintenanceBtn = document.getElementById('toggle-maintenance');
            if (maintenanceBtn) {
                maintenanceBtn.addEventListener('click', () => {
                    // Check current maintenance mode from maintenance.js
                    fetch('js/maintenance.js')
                        .then(response => response.text())
                        .then(text => {
                            const maintenanceMatch = text.match(/const MAINTENANCE_MODE = (true|false)/);
                            const devModeMatch = text.match(/const DEVELOPER_MODE = (true|false)/);
                            const maintenance = maintenanceMatch ? maintenanceMatch[1] === 'true' : false;
                            const devMode = devModeMatch ? devModeMatch[1] === 'true' : false;
                            
                            let status = maintenance ? 'ðŸ”´ MAINTENANCE MODE ACTIVE' : 'ðŸŸ¢ SITE IS LIVE';
                            if (devMode) status += ' (Developer Mode Enabled)';
                            
                            alert(`Current Status: ${status}\n\nTo change maintenance mode, edit js/maintenance.js file:\n- Set MAINTENANCE_MODE to true/false\n- Set DEVELOPER_MODE to true/false for testing`);
                        })
                        .catch(error => {
                            alert('Could not check maintenance status. Please check js/maintenance.js file manually.');
                        });
                });
            }

            // Export messages functionality
            const exportBtn = document.getElementById('export-messages');
            if (exportBtn) {
                exportBtn.addEventListener('click', () => {
                    const messages = mailbox.getMessages();
                    if (messages.length === 0) {
                        alert('No messages to export.');
                        return;
                    }
                    
                    const exportData = {
                        exportDate: new Date().toISOString(),
                        messageCount: messages.length,
                        messages: messages
                    };
                    
                    const dataStr = JSON.stringify(exportData, null, 2);
                    const dataBlob = new Blob([dataStr], {type: 'application/json'});
                    const url = URL.createObjectURL(dataBlob);
                    
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `cadential-messages-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                });
            }
        }        function updateAdminStats() {
            if (typeof mailbox !== 'undefined') {
                const messages = mailbox.getMessages();
                const unreadCount = messages.filter(msg => !msg.isRead).length;
                const starredCount = messages.filter(msg => msg.isStarred).length;
                
                // Update stat displays with animation
                updateStatDisplay('total-messages', messages.length);
                updateStatDisplay('unread-messages', unreadCount);
                updateStatDisplay('starred-messages', starredCount);
            } else {
                // Retry after a short delay if mailbox isn't loaded yet
                setTimeout(updateAdminStats, 100);
            }
        }

        function updateStatDisplay(elementId, newValue) {
            const element = document.getElementById(elementId);
            if (element && element.textContent !== newValue.toString()) {
                element.style.transform = 'scale(1.1)';
                element.textContent = newValue;
                setTimeout(() => {
                    element.style.transform = 'scale(1)';
                }, 200);
            }
        }

        // Update stats whenever mailbox changes
        setInterval(updateAdminStats, 2000);
    </script>
</body>
</html>

